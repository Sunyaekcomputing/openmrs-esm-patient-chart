"use strict";(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[5696],{55696:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});var n=i(1343),o=i.n(n),l=i(71123),r=i(83437),u=i(82979);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}const s=function(t){var e,i,s,c=t.patientUuid,d=t.patient,p=t.clinicalFormsWorkspaceName,f=void 0===p?u.clinicalFormsWorkspace:p,m=t.closeWorkspace,v=t.closeWorkspaceWithSavedChanges,y=t.promptBeforeClosing,h=t.mutateForm,S=t.formInfo,b=S||{},g=b.encounterUuid,U=b.formUuid,k=b.visitStartDatetime,D=b.visitStopDatetime,_=b.visitTypeUuid,E=b.visitUuid,W=b.additionalProps,w=(0,u.useVisitOrOfflineVisit)(c).currentVisit,A=(i=(0,n.useState)(!0),s=2,function(t){if(Array.isArray(t))return t}(i)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,l=[],r=!0,u=!1;try{for(i=i.call(t);!(r=(n=i.next()).done)&&(l.push(n.value),!e||l.length!==e);r=!0);}catch(t){u=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(u)throw o}}return l}}(i,s)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}(i,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),C=A[0],T=A[1],V=(0,r.useConnectivity)(),O=(0,r.useVisit)(c).mutate,x=(0,l.iX)().mutate,F=(0,n.useMemo)((function(){var t,e,i,n,o;return{view:"form",formUuid:null!=U?U:null,visitUuid:null!==(e=null!=E?E:null==w?void 0:w.uuid)&&void 0!==e?e:null,visitTypeUuid:null!==(i=null!=_?_:null==w||null===(t=w.visitType)||void 0===t?void 0:t.uuid)&&void 0!==i?i:null,visitStartDatetime:null!==(n=null!=k?k:null==w?void 0:w.startDatetime)&&void 0!==n?n:null,visitStopDatetime:null!==(o=null!=D?D:null==w?void 0:w.stopDatetime)&&void 0!==o?o:null,isOffline:!V,patientUuid:null!=c?c:null,patient:d,encounterUuid:null!=g?g:null,closeWorkspace:function(){"function"==typeof h&&h(),m()},closeWorkspaceWithSavedChanges:function(){"function"==typeof h&&h(),O(),"function"==typeof u.invalidateVisitAndEncounterData&&(0,u.invalidateVisitAndEncounterData)(x,c),v()},promptBeforeClosing:y,additionalProps:W,clinicalFormsWorkspaceName:f}}),[W,f,m,v,null==w?void 0:w.startDatetime,null==w?void 0:w.stopDatetime,null==w?void 0:w.uuid,null==w||null===(e=w.visitType)||void 0===e?void 0:e.uuid,g,U,x,V,O,h,d,c,y,k,D,_,E]);return(0,n.useEffect)((function(){F.formUuid&&(T(!1),setTimeout((function(){T(!0)})))}),[F]),o().createElement("div",null,o().createElement(r.ExtensionSlot,{name:"visit-context-header-slot",state:{patientUuid:c}}),C&&S&&c&&d&&o().createElement(r.ExtensionSlot,{name:"form-widget-slot",state:F}))}}}]);